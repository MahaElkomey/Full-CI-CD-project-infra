- name: play1
  hosts: all
  tasks:
  
  - name: ping
    ping:

  - name: update
    package:
      update_cache: true
      
#install aws cli      
  - name: Install package dependencies.
    package: name={{ item }} state=present
    with_items:
      - unzip

  - name: dounload awscli 
    ansible.builtin.command: curl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o "awscliv2.zip"

  - name: unzip awscli
    ansible.builtin.command: unzip awscliv2.zip

  - name: run the awscli file
    ansible.builtin.command: sudo ./aws/install

#install kubectl
  - name: get kubectl url
    ansible.builtin.command: curl -O https://s3.us-west-2.amazonaws.com/amazon-eks/1.23.17/2023-05-11/bin/linux/amd64/kubectl
    
  - name: change mode
    ansible.builtin.command: chmod +x kubectl
    
  - name: move kubectl file
    ansible.builtin.command: sudo mv kubectl /usr/local/bin/  

#install docker
  - name: update
    package:
      update_cache: true

  - name: Add Docker GPG apt Key
    apt_key:
      url: https://download.docker.com/linux/ubuntu/gpg
      state: present

  - name: Add Docker Repository
    apt_repository:
      repo: deb https://download.docker.com/linux/ubuntu focal stable
      state: present

  - name: Update apt and install docker-ce
    apt:
      name: docker-ce
      state: latest
      update_cache: true

